{"ast":null,"code":"import _classCallCheck from \"/Users/orenmagid/Development/PersonalProjects/APIPractice/APIFrontend/api-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/orenmagid/Development/PersonalProjects/APIPractice/APIFrontend/api-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/orenmagid/Development/PersonalProjects/APIPractice/APIFrontend/api-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/orenmagid/Development/PersonalProjects/APIPractice/APIFrontend/api-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/orenmagid/Development/PersonalProjects/APIPractice/APIFrontend/api-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/orenmagid/Development/PersonalProjects/APIPractice/APIFrontend/api-frontend/src/containers/Main.js\";\nimport React, { PureComponent } from 'react';\nimport { baseUrl } from '../constants';\nimport UploadForm from '../components/UploadForm';\nimport Images from '../components/Images';\nimport { themeColors } from '../constants';\n\nvar Main =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(Main, _PureComponent);\n\n  function Main() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Main);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Main)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      file: null,\n      images: []\n    };\n\n    _this.fetchImages = function () {\n      var token = localStorage.getItem('token');\n\n      if (token) {\n        fetch(baseUrl + '/images', {\n          method: 'Get',\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            Authorization: \"Bearer \".concat(token)\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (images) {\n          _this.setState({\n            images: images\n          });\n        });\n      }\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var file = _this.state.file;\n      console.log('TCL: Main -> file', file);\n      var params = {\n        title: e.currentTarget.title.value,\n        attribution: e.currentTarget.attribution.value,\n        notes: e.currentTarget.notes.value,\n        live: e.currentTarget.live.value,\n        url: file\n      };\n\n      _this.handlePostImage(params);\n    };\n\n    _this.handlePostImage = function (params) {\n      var token = localStorage.getItem('token');\n\n      if (token) {\n        fetch(baseUrl + '/images', {\n          method: 'POST',\n          body: JSON.stringify(params),\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: \"Bearer \".concat(token)\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (image) {\n          var images = _this.state.images;\n          var newImages = images.push(image);\n\n          _this.setState({\n            newImages: newImages\n          });\n        });\n      }\n    };\n\n    _this.handleChange = function (e) {\n      if (e.target.files.length > 0) {\n        var reader = new FileReader();\n        var file = e.target.files[0];\n        console.log('TCL: Main -> file', file);\n\n        reader.onloadend = function () {\n          _this.setState({\n            file: reader.result\n          });\n\n          console.log('TCL: Main -> reader.onloadend -> reader.result', reader.result);\n        };\n\n        reader.readAsDataURL(file);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Main, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchImages();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var images = this.state.images;\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        style: {\n          height: '2rem',\n          width: '100%',\n          backgroundColor: themeColors.primaryColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          height: '2rem',\n          width: '100%',\n          backgroundColor: themeColors.secondaryColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          height: '2rem',\n          width: '100%',\n          backgroundColor: themeColors.tertiaryColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          height: '2rem',\n          width: '100%',\n          backgroundColor: themeColors.quaternaryColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          height: '2rem',\n          width: '100%',\n          backgroundColor: themeColors.quinaryColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), React.createElement(UploadForm, {\n        handleSubmit: this.handleSubmit,\n        handleChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(Images, {\n        images: images,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Main;\n}(PureComponent);\n\nexport { Main as default };","map":{"version":3,"sources":["/Users/orenmagid/Development/PersonalProjects/APIPractice/APIFrontend/api-frontend/src/containers/Main.js"],"names":["React","PureComponent","baseUrl","UploadForm","Images","themeColors","Main","state","file","images","fetchImages","token","localStorage","getItem","fetch","method","headers","Accept","Authorization","then","res","json","setState","handleSubmit","e","preventDefault","console","log","params","title","currentTarget","value","attribution","notes","live","url","handlePostImage","body","JSON","stringify","image","newImages","push","handleChange","target","files","length","reader","FileReader","onloadend","result","readAsDataURL","height","width","backgroundColor","primaryColor","secondaryColor","tertiaryColor","quaternaryColor","quinaryColor"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react'\nimport { baseUrl } from '../constants'\nimport UploadForm from '../components/UploadForm'\nimport Images from '../components/Images'\nimport { themeColors } from '../constants'\n\nexport default class Main extends PureComponent {\n  state = { file: null, images: [] }\n\n  componentDidMount() {\n    this.fetchImages()\n  }\n\n  fetchImages = () => {\n    let token = localStorage.getItem('token')\n    if (token) {\n      fetch(baseUrl + '/images', {\n        method: 'Get',\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(res => res.json())\n        .then(images => {\n          this.setState({ images })\n        })\n    }\n  }\n\n  handleSubmit = e => {\n    e.preventDefault()\n    const { file } = this.state\n    console.log('TCL: Main -> file', file)\n\n    const params = {\n      title: e.currentTarget.title.value,\n      attribution: e.currentTarget.attribution.value,\n      notes: e.currentTarget.notes.value,\n      live: e.currentTarget.live.value,\n      url: file\n    }\n    this.handlePostImage(params)\n  }\n\n  handlePostImage = params => {\n    let token = localStorage.getItem('token')\n    if (token) {\n      fetch(baseUrl + '/images', {\n        method: 'POST',\n        body: JSON.stringify(params),\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(res => res.json())\n        .then(image => {\n          const { images } = this.state\n          const newImages = images.push(image)\n          this.setState({ newImages })\n        })\n    }\n  }\n\n  handleChange = e => {\n    if (e.target.files.length > 0) {\n      const reader = new FileReader()\n\n      const file = e.target.files[0]\n      console.log('TCL: Main -> file', file)\n\n      reader.onloadend = () => {\n        this.setState({ file: reader.result })\n        console.log(\n          'TCL: Main -> reader.onloadend -> reader.result',\n          reader.result\n        )\n      }\n\n      reader.readAsDataURL(file)\n    }\n  }\n\n  render() {\n    const { images } = this.state\n    return (\n      <>\n        <div\n          style={{\n            height: '2rem',\n            width: '100%',\n            backgroundColor: themeColors.primaryColor\n          }}\n        />\n        <div\n          style={{\n            height: '2rem',\n            width: '100%',\n            backgroundColor: themeColors.secondaryColor\n          }}\n        />\n        <div\n          style={{\n            height: '2rem',\n            width: '100%',\n            backgroundColor: themeColors.tertiaryColor\n          }}\n        />\n        <div\n          style={{\n            height: '2rem',\n            width: '100%',\n            backgroundColor: themeColors.quaternaryColor\n          }}\n        />\n        <div\n          style={{\n            height: '2rem',\n            width: '100%',\n            backgroundColor: themeColors.quinaryColor\n          }}\n        />\n\n        <UploadForm\n          handleSubmit={this.handleSubmit}\n          handleChange={this.handleChange}\n        />\n        <Images images={images} />\n      </>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}