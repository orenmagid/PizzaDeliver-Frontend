{"ast":null,"code":"import _classCallCheck from \"/Users/orenmagid/Development/PersonalProjects/ChroniclePizza/chronicle-pizza-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/orenmagid/Development/PersonalProjects/ChroniclePizza/chronicle-pizza-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/orenmagid/Development/PersonalProjects/ChroniclePizza/chronicle-pizza-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/orenmagid/Development/PersonalProjects/ChroniclePizza/chronicle-pizza-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/orenmagid/Development/PersonalProjects/ChroniclePizza/chronicle-pizza-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/orenmagid/Development/PersonalProjects/ChroniclePizza/chronicle-pizza-frontend/src/containers/App/index.js\";\nimport React, { Component } from 'react';\nimport { Route } from 'react-router-dom';\nimport NavBar from '../../components/Navbar';\nimport LoginForm from '../../components/LoginForm';\nimport NewUserForm from '../../components/NewUserForm';\nimport Main from '../Main';\nimport OrderForm from '../../components/OrderForm';\nimport { baseUrl } from '../../constants';\nimport { styled } from 'styletron-react';\nimport styles from './styles.js';\nvar MainContainer = styled('div', styles.main);\nvar Content = styled('div', styles.content);\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      error: ''\n    };\n\n    _this.handleCreateUser = function (e) {\n      e.preventDefault();\n      var data = {\n        user: {\n          first_name: e.currentTarget.first_name.value,\n          last_name: e.currentTarget.last_name.value,\n          username: e.currentTarget.username.value,\n          email: e.currentTarget.email.value,\n          password: e.currentTarget.password.value\n        }\n      };\n      fetch(baseUrl + '/users', {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (newUser) {\n        if (newUser.errors) {\n          _this.displayErrors(newUser.errors);\n        } else {\n          if (newUser.success) {\n            localStorage.setItem('token', newUser.token);\n\n            _this.setState({\n              error: ''\n            });\n          }\n\n          window.history.back();\n        }\n      });\n    };\n\n    _this.displayErrors = function (errors) {\n      var errorlist = errors.map(function (error) {\n        return \"-\".concat(error, \" \\n\");\n      });\n      alert(errorlist.join(' '));\n    };\n\n    _this.handleLogin = function (e) {\n      e.preventDefault();\n      var params = {\n        username: e.currentTarget.username.value,\n        password: e.currentTarget.password.value\n      };\n\n      _this.setState({\n        error: ''\n      });\n\n      fetch(baseUrl + '/login', {\n        method: 'POST',\n        body: JSON.stringify(params),\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json'\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        console.log('TCL: App -> data', data);\n\n        if (data.success) {\n          localStorage.setItem('token', data.token);\n\n          _this.setState({\n            error: ''\n          });\n        } else {\n          _this.setState({\n            error: 'Invalid username or password'\n          });\n\n          alert('Invalid username or password');\n        }\n      });\n    };\n\n    _this.handleLogout = function () {\n      localStorage.clear();\n    };\n\n    _this.handlePlaceOrder = function (order) {\n      var token = localStorage.getItem('token');\n\n      if (token) {\n        fetch(baseUrl + '/orders', {\n          method: 'POST',\n          body: JSON.stringify(order),\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: \"Bearer \".concat(token)\n          }\n        }).then(function (res) {\n          return res.json();\n        }).then(function (orders) {\n          var localOrders = _this.state.orders;\n          var newImages = images.push(image);\n\n          _this.setState({\n            newImages: newImages\n          });\n        });\n      }\n    };\n\n    _this.handleCancelOrder = function () {};\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // if (\n      //   localStorage.getItem('token') &&\n      //   window.location.href.includes('login')\n      // ) {\n      //   return <Redirect to=\"/\" />\n      // }\n      return React.createElement(MainContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        handleLogin: this.handleLogin,\n        handleLogout: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/new_user\",\n        render: function render(routerProps) {\n          return React.createElement(NewUserForm, {\n            handleCreateOrEditUser: _this2.handleCreateUser,\n            displayNewUserForm: _this2.state.displayNewUserForm,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), localStorage.getItem('token') ? null : React.createElement(Route, {\n        path: \"/login\",\n        render: function render(routerProps) {\n          return React.createElement(LoginForm, {\n            createNewUser: _this2.createNewUser,\n            handleLogin: _this2.handleLogin,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), localStorage.getItem('token') ? React.createElement(React.Fragment, null, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render(routerProps) {\n          return React.createElement(Main, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/place-order\",\n        render: function render(routerProps) {\n          return React.createElement(OrderForm, {\n            handlePlaceOrder: _this2.handlePlaceOrder,\n            handleCancelOrder: _this2.handleCancelOrder,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })) : null));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/orenmagid/Development/PersonalProjects/ChroniclePizza/chronicle-pizza-frontend/src/containers/App/index.js"],"names":["React","Component","Route","NavBar","LoginForm","NewUserForm","Main","OrderForm","baseUrl","styled","styles","MainContainer","main","Content","content","App","state","error","handleCreateUser","e","preventDefault","data","user","first_name","currentTarget","value","last_name","username","email","password","fetch","method","body","JSON","stringify","headers","then","response","json","newUser","errors","displayErrors","success","localStorage","setItem","token","setState","window","history","back","errorlist","map","alert","join","handleLogin","params","Accept","res","console","log","handleLogout","clear","handlePlaceOrder","order","getItem","Authorization","orders","localOrders","newImages","images","push","image","handleCancelOrder","routerProps","displayNewUserForm","createNewUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Route } from 'react-router-dom'\nimport NavBar from '../../components/Navbar'\nimport LoginForm from '../../components/LoginForm'\nimport NewUserForm from '../../components/NewUserForm'\nimport Main from '../Main'\nimport OrderForm from '../../components/OrderForm'\nimport { baseUrl } from '../../constants'\nimport { styled } from 'styletron-react'\nimport styles from './styles.js'\n\nconst MainContainer = styled('div', styles.main)\nconst Content = styled('div', styles.content)\n\nclass App extends Component {\n  state = { error: '' }\n\n  handleCreateUser = e => {\n    e.preventDefault()\n\n    let data = {\n      user: {\n        first_name: e.currentTarget.first_name.value,\n        last_name: e.currentTarget.last_name.value,\n        username: e.currentTarget.username.value,\n        email: e.currentTarget.email.value,\n        password: e.currentTarget.password.value\n      }\n    }\n\n    fetch(baseUrl + '/users', {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(response => response.json())\n      .then(newUser => {\n        if (newUser.errors) {\n          this.displayErrors(newUser.errors)\n        } else {\n          if (newUser.success) {\n            localStorage.setItem('token', newUser.token)\n\n            this.setState({\n              error: ''\n            })\n          }\n          window.history.back()\n        }\n      })\n  }\n\n  displayErrors = errors => {\n    let errorlist = errors.map(error => {\n      return `-${error} \\n`\n    })\n    alert(errorlist.join(' '))\n  }\n\n  handleLogin = e => {\n    e.preventDefault()\n    const params = {\n      username: e.currentTarget.username.value,\n      password: e.currentTarget.password.value\n    }\n\n    this.setState({ error: '' })\n\n    fetch(baseUrl + '/login', {\n      method: 'POST',\n      body: JSON.stringify(params),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        console.log('TCL: App -> data', data)\n        if (data.success) {\n          localStorage.setItem('token', data.token)\n\n          this.setState({ error: '' })\n        } else {\n          this.setState({ error: 'Invalid username or password' })\n          alert('Invalid username or password')\n        }\n      })\n  }\n\n  handleLogout = () => {\n    localStorage.clear()\n  }\n\n  handlePlaceOrder = order => {\n    let token = localStorage.getItem('token')\n    if (token) {\n      fetch(baseUrl + '/orders', {\n        method: 'POST',\n        body: JSON.stringify(order),\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(res => res.json())\n        .then(orders => {\n          const localOrders = this.state.orders\n          const newImages = images.push(image)\n          this.setState({ newImages })\n        })\n    }\n  }\n\n  handleCancelOrder = () => {}\n\n  render() {\n    // if (\n    //   localStorage.getItem('token') &&\n    //   window.location.href.includes('login')\n    // ) {\n    //   return <Redirect to=\"/\" />\n    // }\n    return (\n      <MainContainer>\n        <NavBar\n          handleLogin={this.handleLogin}\n          handleLogout={this.handleLogout}\n        />\n\n        <Content>\n          <Route\n            exact\n            path=\"/new_user\"\n            render={routerProps => (\n              <NewUserForm\n                handleCreateOrEditUser={this.handleCreateUser}\n                displayNewUserForm={this.state.displayNewUserForm}\n              />\n            )}\n          />\n          {localStorage.getItem('token') ? null : (\n            <Route\n              path=\"/login\"\n              render={routerProps => (\n                <LoginForm\n                  createNewUser={this.createNewUser}\n                  handleLogin={this.handleLogin}\n                />\n              )}\n            />\n          )}\n          {localStorage.getItem('token') ? (\n            <>\n              <Route exact path=\"/\" render={routerProps => <Main />} />\n              <Route\n                path=\"/place-order\"\n                render={routerProps => (\n                  <OrderForm\n                    handlePlaceOrder={this.handlePlaceOrder}\n                    handleCancelOrder={this.handleCancelOrder}\n                  />\n                )}\n              />\n            </>\n          ) : null}\n        </Content>\n      </MainContainer>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}