{"ast":null,"code":"import _classCallCheck from \"/Users/orenmagid/Development/PersonalProjects/APIPractice/APIFrontend/api-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport uuidv4 from 'uuid/v4';\nexport var uuid = function uuid() {\n  return uuidv4();\n};\n\nvar Publisher = function Publisher() {\n  var _this = this;\n\n  _classCallCheck(this, Publisher);\n\n  this.subscribers = {};\n\n  this.subscribe = function (domEvent, subscriber) {\n    var key = uuid();\n\n    if (domEvent in _this.subscribers) {\n      if (_this.subscribers[domEvent].hasOwnProperty(key)) {\n        console.log(\"Subscription collision detected. '\".concat(key, \"' is already assigned to a subscriber. You must unsubscribe before reassigning.\"));\n        return key;\n      } else {\n        _this.subscribers[domEvent][key] = subscriber;\n        return key;\n      }\n    } else {\n      _this.subscribers[domEvent] = {};\n      _this.subscribers[domEvent][key] = subscriber;\n      return key;\n    }\n  };\n\n  this.publish = function (domEvent, data) {\n    for (var sub in _this.subscribers[domEvent]) {\n      try {\n        _this.subscribers[domEvent][sub](data);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  };\n\n  this.unsubscribe = function (domEvent, key) {\n    if (_this.subscribers.hasOwnProperty(domEvent) && key && _this.subscribers[domEvent].hasOwnProperty(key)) {\n      delete _this.subscribers[domEvent][key];\n    } else {\n      console.log('Subscription not found.');\n    }\n  };\n\n  this.unsubscribeAll = function () {\n    _this.subscribers = {};\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    console.log('Publisher instance created.', this);\n  }\n};\n\nvar RootDOMEventPublisher = new Publisher();\nwindow.addEventListener('click', function (e) {\n  RootDOMEventPublisher.publish('click', e);\n});\nexport default RootDOMEventPublisher;","map":{"version":3,"sources":["/Users/orenmagid/Development/PersonalProjects/APIPractice/APIFrontend/api-frontend/src/components/Publisher.js"],"names":["uuidv4","uuid","Publisher","subscribers","subscribe","domEvent","subscriber","key","hasOwnProperty","console","log","publish","data","sub","e","unsubscribe","unsubscribeAll","process","env","NODE_ENV","RootDOMEventPublisher","window","addEventListener"],"mappings":";AAAA,OAAOA,MAAP,MAAmB,SAAnB;AAEA,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AACxB,SAAOD,MAAM,EAAb;AACD,CAFM;;IAIDE,S,GAGJ,qBAAc;AAAA;;AAAA;;AAAA,OAFdC,WAEc,GAFA,EAEA;;AAAA,OAMdC,SANc,GAMF,UAACC,QAAD,EAAWC,UAAX,EAA0B;AACpC,QAAMC,GAAG,GAAGN,IAAI,EAAhB;;AACA,QAAII,QAAQ,IAAI,KAAI,CAACF,WAArB,EAAkC;AAChC,UAAI,KAAI,CAACA,WAAL,CAAiBE,QAAjB,EAA2BG,cAA3B,CAA0CD,GAA1C,CAAJ,EAAoD;AAClDE,QAAAA,OAAO,CAACC,GAAR,6CACuCH,GADvC;AAGA,eAAOA,GAAP;AACD,OALD,MAKO;AACL,QAAA,KAAI,CAACJ,WAAL,CAAiBE,QAAjB,EAA2BE,GAA3B,IAAkCD,UAAlC;AACA,eAAOC,GAAP;AACD;AACF,KAVD,MAUO;AACL,MAAA,KAAI,CAACJ,WAAL,CAAiBE,QAAjB,IAA6B,EAA7B;AACA,MAAA,KAAI,CAACF,WAAL,CAAiBE,QAAjB,EAA2BE,GAA3B,IAAkCD,UAAlC;AACA,aAAOC,GAAP;AACD;AACF,GAvBa;;AAAA,OAyBdI,OAzBc,GAyBJ,UAACN,QAAD,EAAWO,IAAX,EAAoB;AAC5B,SAAK,IAAIC,GAAT,IAAgB,KAAI,CAACV,WAAL,CAAiBE,QAAjB,CAAhB,EAA4C;AAC1C,UAAI;AACF,QAAA,KAAI,CAACF,WAAL,CAAiBE,QAAjB,EAA2BQ,GAA3B,EAAgCD,IAAhC;AACD,OAFD,CAEE,OAAOE,CAAP,EAAU;AACVL,QAAAA,OAAO,CAACC,GAAR,CAAYI,CAAZ;AACD;AACF;AACF,GAjCa;;AAAA,OAmCdC,WAnCc,GAmCA,UAACV,QAAD,EAAWE,GAAX,EAAmB;AAC/B,QACE,KAAI,CAACJ,WAAL,CAAiBK,cAAjB,CAAgCH,QAAhC,KACAE,GADA,IAEA,KAAI,CAACJ,WAAL,CAAiBE,QAAjB,EAA2BG,cAA3B,CAA0CD,GAA1C,CAHF,EAIE;AACA,aAAO,KAAI,CAACJ,WAAL,CAAiBE,QAAjB,EAA2BE,GAA3B,CAAP;AACD,KAND,MAMO;AACLE,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD;AACF,GA7Ca;;AAAA,OA+CdM,cA/Cc,GA+CG,YAAM;AACrB,IAAA,KAAI,CAACb,WAAL,GAAmB,EAAnB;AACD,GAjDa;;AACZ,MAAIc,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCV,IAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2C,IAA3C;AACD;AACF,C;;AAgDH,IAAMU,qBAAqB,GAAG,IAAIlB,SAAJ,EAA9B;AAEAmB,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiC,UAAAR,CAAC,EAAI;AACpCM,EAAAA,qBAAqB,CAACT,OAAtB,CAA8B,OAA9B,EAAuCG,CAAvC;AACD,CAFD;AAIA,eAAeM,qBAAf","sourcesContent":["import uuidv4 from 'uuid/v4'\n\nexport const uuid = () => {\n  return uuidv4()\n}\n\nclass Publisher {\n  subscribers = {}\n\n  constructor() {\n    if (process.env.NODE_ENV !== 'production') {\n      console.log('Publisher instance created.', this)\n    }\n  }\n\n  subscribe = (domEvent, subscriber) => {\n    const key = uuid()\n    if (domEvent in this.subscribers) {\n      if (this.subscribers[domEvent].hasOwnProperty(key)) {\n        console.log(\n          `Subscription collision detected. '${key}' is already assigned to a subscriber. You must unsubscribe before reassigning.`\n        )\n        return key\n      } else {\n        this.subscribers[domEvent][key] = subscriber\n        return key\n      }\n    } else {\n      this.subscribers[domEvent] = {}\n      this.subscribers[domEvent][key] = subscriber\n      return key\n    }\n  }\n\n  publish = (domEvent, data) => {\n    for (var sub in this.subscribers[domEvent]) {\n      try {\n        this.subscribers[domEvent][sub](data)\n      } catch (e) {\n        console.log(e)\n      }\n    }\n  }\n\n  unsubscribe = (domEvent, key) => {\n    if (\n      this.subscribers.hasOwnProperty(domEvent) &&\n      key &&\n      this.subscribers[domEvent].hasOwnProperty(key)\n    ) {\n      delete this.subscribers[domEvent][key]\n    } else {\n      console.log('Subscription not found.')\n    }\n  }\n\n  unsubscribeAll = () => {\n    this.subscribers = {}\n  }\n}\n\nconst RootDOMEventPublisher = new Publisher()\n\nwindow.addEventListener('click', e => {\n  RootDOMEventPublisher.publish('click', e)\n})\n\nexport default RootDOMEventPublisher\n"]},"metadata":{},"sourceType":"module"}